<script>
  function calculateBMI(weightKg, heightCm) {
    const heightM = heightCm / 100;
    const bmi = weightKg / (heightM * heightM);
    return bmi.toFixed(1);
  }

  document.addEventListener('globo.formbuilder.form.loaded', e => {
    const { formId, form } = e.detail;
    if (formId == "100115") {
      let weight = form.querySelector('input[name="text-1"]');
      let height = form.querySelector('input[name="text-2"]');
      let bmiContainer = form.querySelector('.show-bmi span');

      const updateBMI = () => {
        if (weight.value && height.value.length > 1) {
          let bmi = calculateBMI(weight.value, height.value);
          console.log("bmi", bmi);
          bmiContainer.innerText = bmi;

          if (bmi < 27) {
            form.classList.add('bmi-under-27');
          } else {
            form.classList.remove('bmi-under-27');
          }
        }
      };

      weight.addEventListener('input', updateBMI);
      height.addEventListener('input', updateBMI);
    }
  });
</script>
