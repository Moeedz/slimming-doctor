<script>
  function calculateBMI(weightKg, heightCm) {
    const heightM = heightCm / 100; // convert cm to meters
    const bmi = weightKg / (heightM * heightM);
    return bmi.toFixed(1); // round to 2 decimal places
  }
  
  document.addEventListener('globo.formbuilder.form.loaded', e => {
    const { formId, form } = e.detail
    if (formId == "100115") {
      let weight = form.querySelector('input[name="text-1"]')
      let height = form.querySelector('input[name="text-2"]')

      if (height) {
        height.addEventListener('input', e => {
          if (weight.value && height.value.length > 1) {
            let bmi = calculateBMI(weight.value, height.value)
            console.log("bmi", bmi)
            form.querySelector('.show-bmi span').innerText = bmi
          }
        })
      }
    }
  })
</script>